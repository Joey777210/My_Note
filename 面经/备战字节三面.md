# 备战字节三面！

## 操作系统

1. 进程 线程 协程分别讲一下

   进程是运行中的应用程序，资源分配的基本单位，有独立的地址空间；线程是资源调度的基本单位，共享进程的资源；协程就是一种用户态、编程语言层面的轻量级线程。和线程一样共享堆，不共享栈，协程由程序员在协程的代码里显示调度。内存消耗动态扩张，切换调度的开销小，用户态调度，无需陷入操作系统内核

2. 进程和线程的区别

   四方面：拥有资源，调度，系统开销，通信

3. 线程的状态

   准备，运行，阻塞，等待，超时等待，终结

4. 进程的通信方法

   管道，socket，共享内存，FIFO，消息队列，信号量

5. 进程间同步的方式

   临界区，同步与互斥，信号量，管程

6. 死锁产生的四个条件

   互斥，占有和等待，不可抢占，环路等待

7. 内核态和用户态

   通过系统调用将Linux分为内核态和用户态。内核态就是进入内核的运行过程，**控制计算机的硬件资源，例如协调CPU资源，分配内存资源，并且提供稳定的环境供应用程序运行**。    

   用户态就是用户应用程序的运行过程。为了使应用程序访问到内核管理的资源例如CPU，内存，I/O。内核必须提供一组通用的访问接口，这些接口就叫**系统调用。 ** 

   不同点在于**它们权限不同**。  

   从用户态到内核态切换可以通过三种方式：

   1. **系统调用**，其实系统调用本身就是中断，但是软件中断，跟硬中断不同。
   2. **异常**：如果当前进程运行在用户态，如果这个时候发生了异常事件，就会触发切换。例如：缺页异常。
   3. **外设中断**：当外设完成用户的请求时，会向CPU发送中断信号

8. 多进程和多线程

   从几个角度考虑：数据共享和同步，内存和CPU，创建销毁切换的开销，编程调试，可靠性，分布式  https://blog.csdn.net/linraise/article/details/12979473

9. 共享内存

   共享内存是进程的一种通信方式，需要让每个处理器的缓存都觉察到其他处理器对共享内存的值的修改，才能实现通信

10. 虚拟内存

    **虚拟内存为每个进程提供了一个一致的、私有的地址空间，它让每个进程产生了一种自己在独享主存的错觉（每个进程拥有一片连续完整的内存空间）**    

    每个进程都有自己独立的4G(32位系统下)内存空间，各个进程的内存空间具有类似的结构

11. 虚拟内存和物理内存的区别，怎么映射的？  

    https://blog.csdn.net/lvyibin890/article/details/82217193

    虚拟内存由进程独享；物理内存由进程共享。    

    虚拟内存是连续的地址空间，可以映射到非连续的碎片物理内存空间。     

    进程得到的这4G虚拟内存是一个**连续的地址空间（这也只是进程认为），而实际上，它通常是被分隔成多个物理内存碎片，还有一部分存储在外部磁盘存储器上，在需要时进行数据交换。** 

    **总结一下虚拟内存是怎么工作的**
    当每个进程创建的时候，内核会为进程分配4G的虚拟内存，当进程还没有开始运行时，这只是一个内存布局。实际上**并不立即**就把虚拟内存对应位置的程序数据和代码拷贝到物理内存中，只是**建立好虚拟内存和磁盘文件之间的映射**就好（叫做存储器映射）。这个时候数据和代码还是在磁盘上的。当运行到对应的程序时，**进程去寻找页表**，发现页表中地址没有存放在物理内存上，而是在磁盘上，于是发生**缺页异常**，于是**将磁盘上的数据拷贝到物理内存**中。

    另外在进程运行过程中，要通过malloc来动态分配内存时，也只是分配了虚拟内存，即为这块虚拟内存对应的页表项做相应设置，当**进程真正访问到此数据时，才引发缺页异常**。

    **可以认为虚拟空间都被映射到了磁盘空间中**（事实上也是按需要映射到磁盘空间上，通过**mmap**，mmap是用来建立虚拟空间和磁盘空间的映射关系的）

    **优点：**

    1. 独立的内存空间，一致且固定
    2. 利用碎片物理内存
    3. 共用相同的库文件

12. Linux是如何保证各自进程互不干扰的

    采用了虚拟地址空间，两个进程各自的虚拟地址不同，从逻辑上来实现彼此间的隔离。

13. 内存快满的时候，下一个新进程要怎么运行呢？

    **页面置换：最近最少使用LRU，最近未使用NRU，先进先出，时钟**

14. 常见的换入换出算法

15. 进程调度算法有哪几种？有哪几种评价方式？

    **算法：先来先服务，短作业优先，最短剩余时间优先，时间片轮转，优先级调度，多级反馈队列**  

    评价：周转时间，响应时间，截止时间保证，优先权，达到系统目标，系统吞吐量大，机器利用率，资源平衡利用

16. 一个指令从软件到操作系统到硬件执行，经过哪些步骤？

    1. 预处理：删除注释，展开宏定义等
    2. 编译：词法分析，语法分析，优化代码，生成汇编文件
    3. 汇编：转化为机器指令
    4. 链接：将多个目标模块和库文件链接在一起形成装入模块
    5. 装入：装入物理内存，并且修改与地址有关的代码
    6. CPU执行指令
    
17. 银行家算法

    **在程序运行时避免发生死锁**。算法要做的是判断对请求的满足是否会进入不安全状态，如果是，就拒绝请求；否则予以分配。    

    利用表格法。思想是，一次申请到所有所需的资源，避免死锁。

## 计算机网络

1. 七层协议

   OSI七层：应用层，表示层，会话层，传输层，网络层，数据链路层，物理层  

   五层：应用层，传输层，网络层，数据链路层，物理层  

2. TCP是怎么保证可靠性的

   TCP保证可靠性，主要要解决的问题是：**数据的破坏，丢包，重复，分片顺序混乱**  

   保证的方式有：**序列号，确认应答，重发机制，连接管理，窗口控制**  

   机制有：**重传机制，滑动窗口，流量控制，拥塞控制**  

3. 三次握手为什么不是两次四次

   避免历史连接，互换初始序列号，避免浪费资源

4. TCP怎么保证可靠性，十六位校验和是怎么实现的

   端到端校验和，发送端计算，接收端验证，覆盖首部和数据。目的是发现发送端和接收端之间数据是否发生篡改，如果有篡改，则报文直接丢弃。    

   TCP伪首部  

   计算方法：伪首部、TCP报头、数据，分成16字节的字，反码相加法累加所有16位字，最后结果取反作为校验和

5. TCP粘包  

   面向流的协议，没有包概念。粘包是应用层设计者没有设计好应用层协议导致的。  

6. 802.3x工作在第几层，为什么？  

   数据链路层，MAC地址

7. https握手过程  

   1. 先TCP三次握手
   2. ClientHello：TLS协议版本，生成随机数1，客户端支持的密码套件如RSA
   3. ServerHello：确认TLS版本，生成随机数2，确认密码套件，数字证书中放入公钥发送给客户端
   4. 客户端回应：校验数字证书真实性，取出公钥加密这些内容：随机数3（三个随机数生成会话密钥），加密算法改变通知，客户端握手结束通知
   5. 服务器最后回应：生成会话密钥，加密算法改变通知，服务端握手结束通知。同时把之前所有内容做摘要，发给客户端校验。

8. 为什么需要非对称加密和对称加密？区别是什么？  

   对称密钥效率高速度快，非对称密钥用来交换对称密钥    

   速度不同，加解密过程不同，安全性不同  

9. 知道哪些加密算法

   摘要算法：MD5, SHA1  

   对称加密：DES，AES  

   非对称加密：RSA  

10. TCP的连接和断开发送的报文

    连接：三次握手，SYN,SYN+ACK,ACK    SYN超时会重发5次，初始等待时间1s，每次等待时间乘2

    断开：四次挥手，FIN,ACK,FIN,ACK

11. http请求的过程

    1. DNS，根据域名解析IP：查找过程是浏览器缓存 ——> 系统缓存 ——> 路由器缓存 ——> ISP
    2. 三次握手建立TCP连接
    3. 发送一个HTTP请求，包含请求行，请求头，空行，请求数据
    4. 服务器响应HTTP请求，回复状态行，响应头部，响应数据
    5. 浏览器解析HTML代码，并请求HTML代码中的资源
    6. 关闭TCP连接，浏览器解析JS并将页面渲染给用户

12. TCP挥手的过程

    1. 客户端FIN，客户端进入FIN_WAIT状态
    2. 服务端ACK，服务端进入CLOSE_WAIT状态
    3. 服务端FIN，进入LAST_ACK状态
    4. 客户端ACK，进入TIME_WAIT状态，服务端收到ACK后进入CLOSE状态
    5. 客户端TIME_WAIT状态保持2MSL（报文最大生存时间的两倍）之后进入CLOSE状态

13. TCP 和 UDP的区别

    |              | UDP                                        | TCP                                    |
    | :----------- | :----------------------------------------- | :------------------------------------- |
    | 是否连接     | 无连接                                     | 面向连接                               |
    | 是否可靠     | 不可靠传输，不使用流量控制和拥塞控制       | 可靠传输，使用流量控制和拥塞控制       |
    | 连接对象个数 | 支持一对一，一对多，多对一和多对多交互通信 | 只能是一对一通信                       |
    | 传输方式     | 面向报文                                   | 面向字节流                             |
    | 首部开销     | 首部开销小，仅8字节                        | 首部最小20字节，最大60字节             |
    | 适用场景     | 适用于实时应用（IP电话、视频会议、直播等） | 适用于要求可靠传输的应用，例如文件传输 |

14. TCP的流量控制？

    1. 滑动窗口

       由于TCP是一发送一应答，效率比较低，所以引入滑动窗口。窗口是无需等待确认应答，可以继续发送数据的最大值。  

       窗口大小由接收方确定。  

    2. 流量控制

       发送方不能无脑发数据给接收方，**要考虑接收方的实际接收能力**。就是利用滑动窗口来实现的流量控制。      

       几个问题：操作系统缓冲区和滑动窗口大小，收缩时要先收缩窗口，过一段时间再收缩缓冲区；如果应用程序消费慢，会引发窗口关闭；Nagle算法解决糊涂窗口综合证

15. TCP拥塞控制？

    TCP被设计成**无私**的协议，会根据网络的拥堵情况调整自己发送数据的频率。  

    在网络拥堵时，如果TCP大量发送，会导致时延、丢失等问题，这时TCP就会重传数据，导致网络上数据包更多，更加拥塞。  

    为了解决这个问题，TCP设计了拥塞控制机制，利用**拥塞窗口**来实现拥塞控制。  

    拥塞窗口cwnd由**发送方维护**，根据网络的拥塞情况动态变化。  

    发送窗口 = min (拥塞窗口， 接收窗口)  

    拥塞窗口在网络中没有拥塞时则增大，有拥塞时则减小。检测拥塞的方法是发送方规定时间内有没有收到ACK，即有没有发生超时重传。如果发生了，则说明网络此时拥塞。  

    1. 慢启动：初始值为1，每次乘2，当到达慢启动门限时，进入拥塞避免。慢启动门限ssthresh一般大小是65535  
    2. 拥塞避免：每次增加1，线性增长。当触发一次重传机制，则进入拥塞发生  
    3. 拥塞发生：cwnd回到1，ssthresh变成cwnd/2。如果是超时重传，则采用这种拥塞发生，但这种拥塞发生太激进了，容易造成用户使用的突然卡顿，所以当触发快速重传时，采用快速恢复
    4. 快速恢复：cwnd = ssthresh + 3，重传丢失的数据包，如果再收到重复的ACK，cwnd + 1，如果收到新的ACK，说明重传成功，把cwnd设为慢启动中的ssthresh，然后进入拥塞避免。

16. TCP重传机制？

    检测丢失的方式是**序列号和确认应答**，如果发生丢失，采用重传机制来解决。  

    1. 超时重传：超时时间设为RTO，略大于RTT（包的往返时延）。超过超时时间没有收到ACK，则重发该数据。如果重发还没有收到，等待时间变为RTO的两倍，此后每次均乘二。次数默认15
    2. 快速重传：每次等待一个RTO，太长了，所以有了以数据驱动重传的方式。当连续收到一个序列号的ACK时，则表示服务端没有收到这个包，则重传。  
    3. SACK：快速重传不知道要重传ACK序列号里的那个包，还是ACK之后的包都要重传，所以有了SACK。TCP头部选项字段里，添加SACK，将缓存的map发送给发送方，让发送方知道，哪些接收方收到了，哪些没收到。只重传丢失的数据。  
    4. DSACK：使用SACK告诉发送方，哪些数据被重复接收了。可以让发送方知道，是发出去的包丢了，还是ACK丢了；知道发送方发的包是不是被网络延时了；知道网络中是否把发送方的包复制了。

17. CSRF攻击

    https://tech.meituan.com/2018/10/11/fe-security-csrf.html  

    **跨站请求伪造攻击**。可以理解为攻击者调用了你的身份，以你的名义发送恶意请求。  

    被CSRF攻击的两个必要步骤：1. 登录受信任网站A，并生成了Cookie存在本地；2. 不登出网站A的情况下，访问危险网站B。  

    此时网站B就有可能使用你的A的Cookie，仿造你的受害者的身份来访问网站A。  

    **如何防御**：  

    1. 阻止不明外域的访问

       同源检测  

    2. 提交时要求附加只有本域才能获取的信息

    

    

18. 浏览器输入一个网址URL会发生什么？

    1. DNS解析

       - 浏览器缓存：浏览器会按照一定的频率缓存 DNS 记录。
       - 操作系统缓存：如果浏览器缓存中找不到需要的 DNS 记录，那就去操作系统中找。
       - 路由缓存：路由器也有 DNS 缓存。
       - ISP 的 DNS 服务器：ISP 是互联网服务提供商(Internet Service Provider)的简称，ISP 有专门的 DNS 服务器应对 DNS 查询请求。
       - 根服务器：ISP 的 DNS 服务器还找不到的话，它就会向根服务器发出请求，进行**递归**查询（DNS [服务器先问根域名服务器.com](http://xn--44qr6aba96ld4eda63xey2cfa111ap36q.com) 域名服务器的 IP 地址，然后再问.baidu 域名服务器，依次类推）

    2. TCP连接

       三次握手

    3. 发送HTTP请求

       请求行，请求头，空行，请求体

    4. 服务器处理请求并返回HTTP报文

       响应行，响应头，响应主体

    5. 浏览器解析并渲染页面

       根据HTML渲染出DOM树  

       根据CSS画出CSS规则树  

       结合DOM树和CSS树，生成渲染树  

       根据渲染树计算每一个节点的信息  

       根据计算好的信息绘制页面  

    6. 断开TCP连接

       四次挥手

19. token？cookie？session？存在哪里？

    cookie对应sessionID，维持会话连接，cookie存在客户端，或者保存在URL中；Session存在服务端  

    token是临时的证书签名，是服务端无状态认证方式，一般存在localStorage或者cookie中，在服务端一般存在数据库中。  

20. 分布式session怎么实现？除了用redis，还可以用什么？  

    1. 会话保持：通过Nginx做IP或者URL的Hash来实现会话保持，缺点是负载不均衡了
    2. 会话复制：将Session复制到每一台机器上
    3. 会话共享：Session可以放在共享的位置，比如所有节点都在一个共享的Redis中；或者也可以存在数据库或者文件中。  

21. 了解过session存在客户端的方法吗？好处坏处？

    **不了解**

22. TIME_WAIT

    2MSL（两倍的报文最大生存时间）  

    1. 防止旧的相同四元组的数据包被收到
    2. 保证连接正常关闭

    过短会导致收到上一次连接的数据包  

    过长会导致浪费资源

23. HTTP 5xx 

    | 分类 | 分类描述                                       |
    | :--- | :--------------------------------------------- |
    | 1**  | 信息，服务器收到请求，需要请求者继续执行操作   |
    | 2**  | 成功，操作被成功接收并处理                     |
    | 3**  | 重定向，需要进一步的操作以完成请求             |
    | 4**  | 客户端错误，请求包含语法错误或无法完成请求     |
    | 5**  | 服务器错误，服务器在处理请求的过程中发生了错误 |

    常见的：403 Forbidden：服务端理解请求，但拒绝执行

    404 Not Found：无法找到资源

    500：服务端内部错误

    501：服务端不支持该功能

    502：Bat Gateway，网关或者代理尝试请求时收到了无效的响应

    503：服务端过载或者维护

    504：超时

    505：服务端不支持该请求的HTTP协议版本

24. keep-alive

    请求包中添加`Connection: Keep-Alive`，响应时也添加`Connection: Keep-Alive`

25. HTTP和HTTPS的区别

    1. HTTP明文传输，HTTPS加密传输
    2. HTTP三次握手建立连接，HTTPS还要额外进行TLS四次握手
    3. HTTP端口80，HTTPS端口443
    4. HTTPS协议需要向CA请求证书

    HTTPS通过**混合加密，信息摘要，数字证书**解决了HTTP可能发生的**窃听，篡改，冒充**风险  

26. 如果遭到中间人攻击，拦截了公钥，怎么保证数据安全？

    中间人攻击就是，躲在消息的发送者和接收者中间，对消息进行窃听和篡改。  

    服务端发送给客户端的公钥，是放在CA生成的数字证书中的。数字证书最后附上**客户端的信息 + 公钥 一起交给CA，用CA的私钥进行散列生成的数字签名**，一起交给客户端之后，就算中间有人修改了证书中的公钥，也无法修改数字签名。  

    当客户端拿到了证书之后，用CA的公钥解密数字签名，得到加密之前的散列值，和数字证书中信息+公钥重新计算的散列值一对比，发现不对，就说明有中间人攻击，公钥被篡改过了。  

27. Cookie和Session的区别

    共同点是：二者都是维持会话身份的方式  

    不同点：cookie存在客户端，session存在服务端

28. 路由地址？

    在[计算机网络](https://zh.wikipedia.org/wiki/计算机网络)中，**路由表**（routing table）或称**路由择域信息库**（RIB, Routing Information Base），是一个存储在[路由器](https://zh.wikipedia.org/wiki/路由器)或者联网计算机中的电子表格（文件）或[类数据库](https://zh.wikipedia.org/w/index.php?title=类数据库&action=edit&redlink=1)。路由表存储着指向特定网络地址的路径（在有些情况下，还记录有路径的[路由度量值](https://zh.wikipedia.org/w/index.php?title=路由度量值&action=edit&redlink=1)）。路由表中含有网络周边的[拓扑](https://zh.wikipedia.org/wiki/拓扑)信息。路由表创建的主要目标是为了实现[路由协议](https://zh.wikipedia.org/wiki/路由协议)和静态路由选择。  

    在现代路由器构造中，路由表不直接参与[数据包](https://zh.wikipedia.org/wiki/数据包)的传输，而是用于生成一个小型指向表，这个指向表仅仅包含由路由算法选择的数据包传输优先路径，这个表格通常为了优化硬件存储和查找而被压缩或提前编译。本文将忽略这个执行的详细情况而选择整个路径选择／传输信息子系统作为路由表来说明。  

29. IPv4协议的瓶颈？

    2^64个地址，约42亿个，而目前已经即将耗尽

30. 讲一讲IPv6
	128 位（16 个字节）
    1. **地址空间很大**，可以为地球上每一粒沙分配一个IP
    2. 全球可达性，因为地址多，**可以为每个节点分配IP，因此，不需要NAT应用**
    3. **自动配置，IPV6地址可以为终端自动配置IP**，不需要架设DHCP服务
    4. **即插即用，终端设备连接到路由器可马上联网**，因为终端允许自动配置IP地址
    5. 多数组，**一个终端可以配置多个IPV6地址，且可同时使用这些IP**
    6. **高效转发，不需要分片**，定长报头，延迟更低
    7. 没有较验和，IPV6自身支持IPSEC VPN，数据更安全
    8. 没有广播，使用组播服务，没有广播问题

31. 滑动窗口的大小由哪一端来控制？为什么？

    由接收端来控制。  

    **这个字段是接收端告诉发送端自己还有多少缓冲区可以接收数据。于是发送端就可以根据这个接收端的处理能力来发送数据，而不会导致接收端处理不过来。**   

    所以，**通常窗口的大小是由接收方的窗口大小来决定的。**发送方发送的数据大小不能超过接收方的窗口大小，否则接收方就无法正常接收到数据。   

32. DNS用什么传输协议？

    https://www.huaweicloud.com/articles/a6c9d2a39adaf39353876de5fbba5c0a.html    

    DNS在区域传输时使用TCP协议，其他时候使用UDP协议。   

    主DNS服务器和辅助DNS服务器之间的通信叫做区域传输。   

    为什么使用TCP？  

    区域传送时使用TCP，主要有以下两点考虑： 
    1.辅域名服务器会定时（一般时3小时）向主域名服务器进行查询以便了解数据是否有变动。如有变动，则会执行一次区域传送，进行数据同步。**区域传送将使用TCP而不是UDP，因为数据同步传送的数据量比一个请求和应答的数据量要多得多。** 
    2.TCP是一种**可靠的连接，保证了数据的准确性**。  

    为什么使用UDP协议？  

    域名解析时使用UDP协议：   

    客户端向DNS服务器查询域名，一般返回的内容都不超过512字节，用UDP传输即可。不用经过TCP三次握手，这样DNS服务器负载更低，响应更快。  

33. 用户如何找到DNS服务器？

    https://zhuanlan.zhihu.com/p/32531969  

    本机所连接的网络对应的DNS是由网络提供商提供的，可以在电脑的网络设置中查询到。  

    告知的方式是动态主机配置协议（DHCP），当一台主机连入一个网络时，路由器通过DHCPxie'yi分配给他一个IP地址，并且告知它DNS服务器的地址。  

    浏览器在启动的时候，会根据不同操作系统的配置去获取DNS服务器的配置。  

34. DNS服务器是怎么知道IP地址的？如何知道去哪里找DNS服务器的？  

    https://www.ruanyifeng.com/blog/2016/06/dns.html

    查询一次 600s之内不需要重复查询  

    DNS知道所有域名对应的IP的原理是**分级查询**  

    ```bash
    主机名.次级域名.顶级域名.根域名
    
    # 即
    
    host.sld.tld.root
    ```

     math.stackexchange.com的实际域名是math.stackexchange.com.root  

    查询过程看上面阮一峰的博客  

    1. root根域名服务器只有13台，其地址一般内置在操作系统中   
    2. 根据内置的根域名服务器IP地址，DNS服务器向所有这些IP地址发出查询请求，询问`math.stackexchange.com`的顶级域名服务器`com.`的NS记录。最先回复的根域名服务器将被缓存，以后只向这台服务器发请求。
    3. 然后，DNS服务器向这些顶级域名服务器发出查询请求，询问`math.stackexchange.com`的次级域名`stackexchange.com`的NS记录。
    4. 然后，DNS服务器向上面这四台NS服务器查询`math.stackexchange.com`的主机名。
    5. 上面结果显示，`math.stackexchange.com`有4条`A`记录，即这四个IP地址都可以访问到网站。并且还显示，最先返回结果的NS服务器是`ns-463.awsdns-57.com`，IP地址为`205.251.193.207`。

## 数据库

1. B树和B+树的区别

2. B+树的层数和什么有关系

3. B+树的叶子节点是什么数据结构

4. b+树叶子节点[链表](https://www.nowcoder.com/jump/super-jump/word?word=链表)一定是放的是key和值吗？

5. T(name, salary, city) 。求salary>10000并且所在城市平均salary > 5000的人名

6. 学生表，写一个分页查询

7. 已知某个学生ID，如何从全国学生里找到这个学生的信息？怎么用Redis优化？

8. Redis的缓存一致性？

9. MySQL事务？原理是什么？

10. MySQL事务隔离级别

11. MySQL进行范围查找的过程

12. 命令行显示表结构的语句

13. 数据库连接池是什么？连接数是动态变化的吗？

14. 索引？索引类型？怎么确定你有没有用到索引？用到了哪个类型的索引？

15. 怎么去分配聚簇索引和非聚簇索引？为什么？

16. 项目量级大吗？有做过数据库优化吗？

17. int存数据库一般用什么类型来存？用int

18. varchar(35)的含义？一个中文汉字在varchar中占几个字符？编码问题？

19. 为什么要用redis？比mysql快多少倍？单体量级是多大？

20. MySQL一次SQL查询的执行流程

21. MySQL索引的种类，hash和B+树分别的优势和缺点？分别的使用场景？

22. 锁和MVCC

23. ```
    student(id, name)
    class_score(student_id, class_id, score)两张表，
    查询1. 总分前三的学生姓名
    2. 所有课程都及格的学生人数
    ```

24. redis的数据结构，分别的底层实现

25. 组合索引(a, b, c)，查询(a, c)能不能走索引，为什么不能？

26. 事务特性

27. 介绍一下事务？

28. 介绍一下三大范式？

29. MVCC是怎么实现可重复读？细节？

30. B+树为什么设计成非叶子节点不存储数据

31. MySQL与MongoDB的区别？

32. MySQL数据查询，AB两个分别建立索引会更快吗

33. mysql联合索引一道题目：建立了联合a，b，c。

    ```
    a，b，c会走索引吗？a，c会走索引吗？
    ```

34. employee(id, name, salary)

    office(id, city)

    写一个sql，输出每个城市收入最高的员工的名字？后面改成每个城市收入最高的收入?

## Go语言

1. GMP模型
2. GMP中，M的数量怎么控制？P的数量怎么控制？
3. 协程机制
4. 怎么控制channel是否关闭
5. 类型断言？如何判断断言成功？
6. map遍历的时候每次顺序都是固定的吗？为什么？

## Java语言

1. 类加载过程
2. JVM和垃圾回收
3. HashMap底层原理
4. 父类方法和子类方法能不能相互调用？调用场景是什么？
5. 怎么理解多态？
6. JMM说一下
7. 线程属于JMM的哪块区域
8. HashMap线程安全怎么办？ConcurrentHashMap怎么实现的？锁实现细节
9. 锁，lcok和synchronized的区别
10. JDK1.6 1.7 1.8的区别
11. HashMap和HashTable的区别
12. JDK动态代理和CGLIB动态代理的区别？性能和功能分别比较？
13. CGLIB底层原理？
14. Object的类方法有哪些？equals和hashcode讲一下？重写场景？wait讲一下？原理讲一下？wait和sleep和yield比较？
15. 公平锁和非公平锁？原理？
16. wait底层的list讲一下？
17. 深拷贝和浅拷贝？基本类型的拷贝？包装类的拷贝？
18. 创建对象的方法？
19. 线程的run和start方法区别？
20. https://www.nowcoder.com/discuss/631834?channel=-1&source_id=profile_follow_post_nctrack这里边有个题问输出结果有没有不同
21. 线程同步的方法
22. 保证线程安全有哪些方法
23. 自旋锁和轻量级锁的原理
24. 线程池
25. 队列有多少了解
26. ArrayList的扩容是怎么实现的
27. HashMap的put操作做了哪些步骤
28. hashmap判断重复用的是==还是equals
29. hashmap 1.7 和 1.8的区别
30. synchronized在1.8中做了哪些优化？
32. synchronized为什么设计成可重入？
33. volatile的原理？解决了什么问题？
34. Lock接口？AQS？
35. ReentrantLock可以做公平锁吗？怎么实现？
36. StrString s1 = “abc” String s2 = new String(“abc”）两个语句分别创建了几个对象？对象存储的位置？s1和s2相等吗？执行顺序先是第一条再是第二条创建几个对象？
37. interface和abstract的区别
38. abstract抽象类里一定有抽象方法吗？
39. interface可以写方法的实现吗？
40. JVM类加载机制？双亲委派机制？
41. 介绍一下Spring MVC SpringBoot MyBatis
42. SpringMVC的细节
43. Springboot的作用
44. JDK和JRE的区别
45. Java的值传递题目

## 算法

**如果有时间刷一刷CodeTop**

1. **去除链表中的重复元素**

2. 分析k个数组合并排序的复杂度（分为原本有序和原本无序）

   每个数组一个指针，每次指针后移都把所有指针数值比较一下。两个循环套起来的 O(NM)  ,小根堆优化O(NlogK)

3. **最长的格式正确的括号子串(力扣32)**

4. **链表怎么检查环？怎么计算环的长度？**

5. 跳表怎么实现？

   插入新元素的时候，随机一个高度，利用分治的方式，从高层往低层搜索，使得搜索复杂度将为O(logN)   

6. 哈希表怎么实现？解决哈希冲突的方法？除了两种常见的

   数组 + 拉链法。解决哈希冲突：拉链法，线性探测（开放定址），再哈希法（多个Hash函数，一个冲突了换另一个），建立公共溢出区（一旦有冲突，都放入公共溢出区）

7. 红黑树讲一讲，特性，和AVL树的区别，时间复杂度？

   23树到红黑树，2节点的水平变成向左倾斜的红色树枝。  

   红黑树和AVL树的区别：  

   1. 红黑树根据节点的颜色来旋转，AVL树根据平衡因子旋转
   2. 红黑树保持局部平衡，插入效率更高，最多三次旋转；AVL树全局平衡，旋转次数多
   3. AVL树搜索效率更高

   红黑树是**近似的平衡二叉树**，搜索，插入，删除的复杂度都是O(logN)，搜索的系数略大于AVL树，插入和删除的系数略小于AVL树

8. **输入n，给出1~n的所有排列情况** LC没有

9. **m * n的矩阵，从左上到右下，求最大的财富值，并打印这条路径** 剑指47

10. **页面置换LRU**

11. **最长上升子序列的长度** LC 300

12. map插入和查找的时间复杂度

    插入和查找都是O(1)

13. n个点，曼哈顿距离，连通起来的最小花费(克鲁斯卡尔, 最小生成树)

    介绍：面向边来求最小生成树，最直接的想法就是将连通网中的所有边按照权值大小进行升序排序，从小到大依次选择。  

    选择边时，如何判断是否产生回路？  

    判断回路，记录每一个分支中的最大顶点parent，类似并查集的思想，如果添加的一个新边的两个端点顶点相同，则会产生回路，丢弃这条边

14. **二叉树两个叶子节点之间的距离是他们到最近的公共父节点距离之和。给出一棵树，和整数k，求距离大于k的叶子节点对一共有多少对**

15. **两个线程循环打印**

    跳过

16. **一个数组，找出其中出现频率前k的数字**

    跳过

17. **计算带括号的加减乘除**

    跳过

18. **一个环0-9，走n步回到0有多少种走法**

19. **正整数开根，保留两位小数**

20. **编辑距离**

21. **K个一组反转链表，最后一段不完整的也要反转**

22. **无序int数组，给定target，找到数组中的两个元素，使得相乘结果为target，不存在则返回-1 -1**

23. **找到数组中第k大的数字（快排的思路），并且分析复杂度**

24. 堆排序？堆得数据结构？排序的过程？上浮和下沉的时间复杂度是多少？

25. 说一说对平衡二叉树这种结构的理解？使用场景？Java的Map中的红黑树？Map的扩容过程？并发扩容？

26. 讲一讲动态规划和贪心的思想？

27. 在图中找两个点的路径用什么方法？（迪杰斯特拉）

28. **m*n矩阵，行有序（列无序），然后求第k大**

29. **leetcode 84**

30. **一个整型数组，两两异或，求最大的异或结果**

31. **接雨水，要求O(n)**

32. **剑指12 矩阵中的路径**

33. **332 零钱兑换**

34. **层序遍历（自己写树的测试样例要怎么写？？**LC上序列化反序列化的题？）

35. **股票买卖**

36. **相交的链表找交叉点**

37. **返回小于n的所有质数**

38. **lc 31. 下一个排列**

39. [算法题](https://www.nowcoder.com/jump/super-jump/word?word=算法题)：给你一堆ip地址范围对应的城市，实现根据ip一个快速定位查询的系统 45min

40. 数组和链表的区别？

41. **用栈实现队列，其中栈也自己实现**

42. 介绍几种排序算法以及其时间复杂度，空间复杂度

43. 桶排序介绍一下

44. **快速排序介绍一下**，**写一下**

45. 堆排序是怎么实现的？时间复杂度？

46. 图的表示有哪些？那种情况用邻接表？哪种情况用邻接矩阵？

47. **对无序的链表排序，不可以用Java内置容器**

## 设计题

1. **两个大文件找重复的行？数据量小的时候和数据量大的时候分别怎么做？**

   取模分解到若干个小文件中分治写操作有点多，可以优化吗？可以用布隆过滤器吗？能用布隆过滤器优化一下吗？

2. 设计一个学生系统的登录认证模块要怎么设计

3. 写一个动态代理

4. 设计一个限流器

5. 学生教师管理系统，用父类子类设计出实体

6. 怎么防止超卖？Redis超时的话怎么知道是否扣减成功？

7. 写个单例？说一下volatile关键字？和synchronized的区别？乐观锁悲观锁的区别？

8. 圆形的湖，中心鸭子速度s，岸边老虎速度4s，问鸭子能否逃生？

9. 给资源加锁设计

10. 朋友圈接口设计

11. 实现一个顾客和店铺和客服之间的联系，一个客户面对的是店铺，店铺后面某个客服处理请求

12. 动态点赞怎么实现？redis单机扛不住怎么办？缓存分片，分布式锁

13. **数学题**：参加一个[游戏]()节目，你是参赛者，主持人会在你的前面放三个盒子，其中一个盒子藏奖品，你选中一个盒子之后，主持人会开启另外两个中没奖品的一个盒子，剩下一个盒子。请问现在有机会让你换成另外一个盒子，你换盒子和不换盒子的中奖概率是怎么样的？

## 其他

1. Zookeeper原理？
2. UTF-8和GBK的区别
3. unicode和UTF-8的区别
4. Unicode UTF-8 ASCII编码方式有什么区别
5. 一个汉字占ASCII多少字节 UTF-8中呢
6. Spring的IOC,DI,AOP？
7. BeanFactory和FactoryBean？
8. FactoryBean的BeanName说一下？
9. 从A地往B运送3000L汽油，两地相距1000KM，一辆[汽车]()最多可装载1000L汽油，每行驶1KM耗油1L，请问从B地最多可以得到多少L汽油？ 
    （汽油可以在中途放下且只有一辆车） 
    算了二十分钟只给了个250L的错误答案，最后问面试官说是533L，具体过程有很多方法解，本渣到现在还没算出来。
10. RocketMQ和Kafka的区别？
11. 学校里学的哪些课程比较受用？
12. 启动一个应用，监听一个端口对外服务？启动服务以后，本身没有问题，但是[客户端](https://www.nowcoder.com/jump/super-jump/word?word=客户端)连不到服务？如何诊断？



## 实习经历

1. 物联网项目学习到了什么
   * 理论转化为实践
   * 系统的设计，每一个模块的抽象，如何把自己负责的模块封装和抽象成易用的功能提供给上游
   * 接触了开源软件
   * 如何团队协作开发应用程序

2. 物联网项目的难点？如何解决？

   * 如何实现功能？

     看了mosquitto的源码，知道了底层每一个方法的调用时机，这让我在写中间件的时候更加得心应手

   * 嵌套JSON如何解析？

     利用异步解析的方式来做。

3. 连连实习的难点？如何解决？

   * **扫描表然后调用历史数据重跑的风控接口**

     扫描表直接调用会导致数据库压力很大，所以采取MQ，用了异步削峰的思想来解决

   * **消息投递可能会出问题**

     仿照字节公众号上的风控系统设计了保证MQ消息不丢失的调用链路

   * **设计历史数据重跑**

     仿照原本的风控接口链路，设计了幂等的风控链路

4. 连连实习学习到了什么？

   * 入门了如何设计一个风控系统，如何满足可用性和一致性要求，如何在二者之间做取舍。

   * 技术没有银弹，每一种技术和方案都有它自己的应用场景，没有一种技术是可以天下无敌的。要结合实际的业务场景来做设计和取舍。  

     比如Redis缓存，在读多写少的情况下非常好用，但是如果小并发场景，如内部的管理系统，不光没有什么用，还会增加系统的维护难度和风险。

   * 需求总会变化的，新的需求一直都会来。以前的代码需要更加的可维护，可扩展。需要写好代码命名，分层架构。写好文档、单元测试等

   * 学习到了很多技术组件的使用，以及适用场景

   * 沟通最重要，再好的团队协作工具和设计方案也不能代替沟通。